insert into images values (0,'{99,278,418,2206,1265,1201,1084,876,857,880,685,841,868,1558,797,542,467,407,342,410,275,239,248,224,226,232,213,195,215,201,245,208,228,219,219,237,199,190,177,184,188,170,128,170,154,139,156,145,124,134,124,129,136,143,147,137,110,94,91,79,95,76,100,94,79,87,71,79,54,46,50,44,39,51,27,22,31,29,38,20,16,14,8,8,4,8,8,11,8,10,9,7,5,7,6,5,4,8,5,6,4,6,6,6,4,6,4,5,7,7,6,4,7,3,6,5,6,4,4,4,4,6,4,4,3,3,5,6,7,1,5,7,4,3,3,1,3,4,4,1,4,3,2,4,3,6,4,2,4,4,4,4,2,3,3,5,4,5,3,3,4,2,3,3,2,3,5,3,3,3,3,4,2,2,1,2,4,3,0,2,2,3,1,2,2,3,2,4,3,2,3,2,1,2,3,2,2,4,1,4,1,3,2,2,1,4,2,3,3,2,2,2,2,2,2,1,1,2,3,2,2,3,1,3,2,2,1,2,1,3,1,2,3,4,3,2,3,1,1,2,1,2,2,2,1,1,1,2,3,1,1,2,2,3,3,8}','img0');

insert into images values (1,'{3153,4024,1714,1045,853,1250,935,1460,1754,1608,2071,2205,1569,1980,1526,1094,992,1040,639,664,605,524,513,505,452,469,408,333,332,314,325,310,278,266,258,261,256,232,232,232,211,214,194,210,183,195,183,180,185,184,195,204,174,176,163,162,172,174,161,174,159,157,163,166,155,155,162,162,157,155,176,179,182,171,172,177,163,168,166,173,164,180,162,164,161,162,180,180,163,161,156,167,139,151,152,134,134,118,122,117,108,108,105,93,98,90,79,78,80,82,81,75,90,83,86,84,83,84,89,75,84,75,75,71,57,49,58,56,46,48,50,49,57,58,56,59,61,60,78,74,70,62,75,79,78,72,290,320,249,318,439,235,160,193,757,170,131,134,93,107,124,197,112,105,94,142,100,97,106,77,72,71,69,64,60,63,79,61,53,55,41,44,40,45,43,35,30,82,345,492,531,365,295,688,127,123,166,158,177,247,193,151,125,139,119,121,112,110,120,96,112,121,93,93,83,80,83,88,76,83,74,72,73,75,84,74,76,69,72,84,78,86,87,83,71,74,67,60,58,62,52,45,54,52,61,45,41,42,48,63,60,56,69,99,171,241}','img1');

insert into images values (2,'{534,431,1005,717,658,598,536,486,462,447,436,418,407,412,419,433,410,385,381,400,381,347,349,363,416,420,403,355,348,321,285,265,281,257,243,243,228,220,199,190,192,179,170,164,162,165,177,161,159,153,124,125,123,112,119,111,115,106,101,105,94,113,93,90,90,79,99,78,74,70,68,66,70,57,62,69,68,60,56,56,58,50,51,52,49,54,53,49,53,56,50,51,46,41,51,41,40,49,43,40,38,52,43,35,42,40,42,44,45,45,45,32,44,36,36,36,37,37,43,37,36,40,36,35,31,32,34,32,33,36,33,39,34,35,34,35,28,28,30,23,28,26,33,27,25,25,26,26,26,25,28,27,25,29,29,30,22,27,28,26,23,24,24,25,25,24,28,21,18,22,27,20,21,21,16,19,20,22,23,19,22,20,20,18,19,21,18,22,17,18,14,18,20,18,18,17,11,19,19,12,13,10,16,11,17,14,15,13,13,14,13,12,15,17,17,17,12,12,13,15,12,12,11,16,14,12,12,11,13,12,12,12,10,11,9,9,9,6,8,7,12,10,6,11,9,8,11,9,11,13,12,10,11,12,13,44}','img2');

insert into images values (3,'{93,120,159,189,208,246,233,251,267,274,256,270,254,281,289,268,286,256,263,264,278,274,282,271,286,300,287,283,275,273,268,261,278,268,247,258,241,229,249,248,216,235,232,199,208,201,200,189,209,180,166,189,184,169,181,162,148,172,164,166,161,158,162,162,150,156,150,149,138,151,142,137,139,135,136,135,143,140,118,132,122,119,125,132,130,137,130,139,128,124,131,136,117,120,114,116,118,120,112,120,128,125,115,111,107,114,107,96,115,106,106,110,98,99,101,92,85,89,89,89,80,72,71,70,63,68,66,63,61,53,60,67,55,61,59,63,51,56,56,67,62,59,57,55,64,55,62,61,53,63,60,61,65,55,68,61,57,60,56,48,61,52,56,49,51,54,53,57,46,47,55,46,48,51,48,42,45,50,40,51,46,49,42,40,42,45,36,43,42,50,44,46,43,43,31,40,28,32,29,28,26,30,33,28,30,31,27,28,30,25,27,37,27,26,20,23,15,23,20,21,19,18,16,16,14,13,10,15,12,12,12,14,16,14,12,12,14,11,12,9,11,10,9,12,10,5,8,5,7,5,9,13,13,9,6,19}','img3');

insert into images values (4,'{264,275,382,416,448,407,421,396,406,398,377,384,357,373,351,352,339,320,318,324,318,301,296,291,273,270,258,239,233,237,228,208,208,203,203,202,170,183,168,167,160,161,156,164,161,154,150,148,144,132,138,125,128,132,127,117,114,118,115,121,119,107,112,110,114,103,109,110,101,117,109,110,107,101,96,100,97,90,101,100,97,92,96,97,97,94,85,87,94,91,86,106,92,94,87,84,82,93,86,90,87,83,83,87,77,85,80,73,82,73,76,81,73,72,71,73,76,62,60,63,68,66,63,61,61,58,59,55,62,56,62,65,52,64,57,54,52,55,58,51,61,51,53,54,53,49,47,47,48,42,44,42,48,45,46,47,45,43,43,37,41,37,48,39,39,35,41,45,35,41,39,35,35,32,38,31,29,34,30,31,26,25,29,31,19,27,29,32,34,27,30,26,32,25,30,25,26,27,26,22,21,20,28,25,23,24,24,21,26,24,23,25,21,29,20,16,20,23,21,19,22,23,25,18,22,25,24,21,24,24,26,24,27,26,29,28,18,19,24,22,20,23,25,19,24,24,23,18,23,21,16,14,16,20,12,93}','img4');

insert into images values (5,'{36,179,88,49,43,40,36,41,23,24,21,22,24,27,32,48,57,89,128,171,189,183,185,199,175,168,158,153,172,188,167,178,182,169,163,171,168,151,135,138,138,130,149,145,124,123,121,124,132,127,118,118,120,130,110,130,122,128,132,129,134,145,140,139,135,140,130,138,145,144,139,144,159,161,160,176,185,174,177,184,180,178,163,167,179,178,163,171,166,145,157,139,136,137,129,136,147,149,161,146,136,125,133,127,140,112,115,117,86,96,107,111,99,96,103,89,91,88,96,86,84,74,82,78,77,76,80,74,74,78,79,69,66,77,70,67,71,74,73,77,76,74,73,68,72,66,88,84,76,69,66,65,78,75,71,69,63,68,67,71,70,60,60,65,74,64,68,77,79,67,71,79,80,84,91,89,100,85,69,63,77,74,81,63,43,45,40,40,39,37,42,40,47,45,41,42,43,43,43,37,34,36,35,37,34,42,42,44,42,42,50,50,48,54,60,51,66,73,80,84,50,38,38,38,41,33,37,37,45,53,37,30,20,22,22,19,17,19,20,23,28,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0}','img5');

insert into images values (6,'{132,140,87,98,116,120,133,158,190,201,212,220,226,228,233,237,245,264,258,273,258,242,255,264,266,258,273,270,252,257,244,231,240,232,243,241,227,228,211,217,224,226,222,202,224,196,227,198,211,196,206,191,192,198,205,191,195,195,182,208,179,191,177,187,190,181,186,169,179,182,164,170,162,180,172,156,169,164,175,155,183,168,174,156,165,159,168,149,156,146,141,159,146,157,151,148,150,152,144,141,149,142,146,142,137,148,135,144,137,126,125,140,125,128,127,123,120,134,123,126,116,116,106,111,117,113,118,118,105,105,101,110,105,103,101,98,87,97,82,89,100,84,92,81,83,64,88,81,75,64,75,65,62,71,56,68,74,69,58,57,60,64,60,59,57,49,51,54,48,47,36,46,49,43,42,44,37,46,42,34,37,47,32,38,33,36,34,37,36,27,32,36,38,36,32,43,35,35,37,37,31,34,35,29,32,35,30,35,33,28,25,26,26,28,25,26,28,25,28,29,25,26,24,19,25,25,19,24,24,24,23,26,27,33,30,29,31,34,32,39,33,41,37,40,43,55,59,65,66,77,90,113,160,409,80,128}','img6');

insert into images values (7,'{124,144,117,81,68,62,47,57,43,47,40,42,47,49,47,49,47,52,55,45,52,55,46,66,55,54,54,48,63,52,66,67,69,71,66,79,86,90,100,99,100,104,117,107,102,106,106,98,106,119,116,107,118,96,100,106,105,100,107,98,86,102,92,95,85,91,81,87,87,78,79,70,75,77,76,73,68,66,66,67,67,70,66,77,68,66,66,67,62,63,62,70,68,69,62,57,67,56,64,53,51,56,65,59,52,46,58,48,50,50,50,53,53,51,46,48,52,55,48,54,53,51,53,57,42,51,49,48,41,41,38,41,40,44,38,46,38,39,43,42,45,42,41,41,39,41,43,52,44,44,48,49,43,41,48,51,47,47,44,41,49,53,53,42,53,50,50,52,54,53,52,53,58,51,64,62,59,68,67,74,73,76,69,82,82,80,87,78,92,84,95,88,103,106,94,96,89,93,98,94,91,110,104,99,98,111,117,127,121,143,156,147,150,144,132,170,156,163,175,170,168,165,157,151,157,182,157,177,170,173,174,166,174,172,167,196,181,192,189,188,181,206,212,223,236,267,238,290,371,525,674,722,3931,4717,1258,6392}','img7');

insert into images values (8,'{833,312,262,224,227,203,202,204,190,171,172,174,197,176,162,171,174,164,164,144,148,162,155,164,153,176,199,233,220,214,197,166,155,152,145,146,145,136,128,148,119,127,118,121,123,131,143,124,125,120,126,116,119,137,129,116,129,117,127,128,120,120,122,109,111,112,111,108,112,114,109,97,103,107,113,98,110,98,99,100,96,82,89,96,97,90,95,94,98,97,81,102,82,101,94,102,84,94,105,98,98,109,107,118,121,117,115,113,110,114,117,108,101,105,115,116,99,105,104,106,104,99,111,97,99,113,109,83,91,101,114,104,110,107,118,124,135,202,590,224,154,127,139,112,127,122,112,103,98,109,111,116,111,128,110,115,117,96,108,107,115,109,121,112,128,122,117,117,110,104,107,109,102,95,95,92,91,94,86,81,89,78,74,90,81,85,77,78,75,77,89,82,82,68,66,67,66,69,66,62,62,68,63,63,53,57,54,54,60,60,46,56,61,51,49,55,41,49,44,46,39,44,43,33,39,35,46,40,35,32,31,32,37,40,33,37,33,32,37,42,37,41,32,37,34,40,49,49,59,63,67,108,185,326,523,1033}','img8');

--insert into images values (9,'{0,1,1,4,5,5,10,11,22,29,44,51,56,69,87,88,110,115,126,134,133,128,150,142,145,145,146,136,140,140,159,153,170,153,159,179,162,162,165,171,188,181,188,193,205,183,185,195,177,191,181,159,163,159,176,170,162,160,167,144,165,170,166,171,180,174,178,189,185,188,200,181,209,194,213,201,183,184,189,198,184,183,181,189,181,187,193,206,199,199,208,229,241,224,239,235,234,221,223,231,228,225,233,226,231,231,216,225,222,223,218,220,254,213,218,200,199,200,199,203,211,195,194,211,186,195,214,203,181,179,199,182,173,179,168,183,176,169,165,161,162,161,164,154,156,154,149,152,137,150,148,143,157,139,139,145,146,142,133,131,116,126,115,114,117,112,117,113,98,106,97,100,98,95,82,79,78,82,68,62,53,56,51,50,45,46,44,46,47,44,39,34,34,35,33,33,28,31,27,26,26,32,23,28,22,20,19,17,19,19,18,20,14,19,18,17,18,19,17,18,16,20,18,11,7,14,8,10,6,9,9,10,7,12,7,8,12,8,8,5,3,2,2,2,2,1,1,1,1,1,1,1,2,1,1,4}','img9');




insert into images values ( 0 ,'{0,1,1,4,5,5,10,11,22,29,44,51,56,69,87,88,110,115,126,134,133,128,150,142,145,145,146,136,140,140,159,153,170,153,159,179,162,162,165,171,188,181,188,193,205,183,185,195,177,191,181,159,163,159,176,170,162,160,167,144,165,170,166,171,180,174,178,189,185,188,200,181,209,194,213,201,183,184,189,198,184,183,181,189,181,187,193,206,199,199,208,229,241,224,239,235,234,221,223,231,228,225,233,226,231,231,216,225,222,223,218,220,254,213,218,200,199,200,199,203,211,195,194,211,186,195,214,203,181,179,199,182,173,179,168,183,176,169,165,161,162,161,164,154,156,154,149,152,137,150,148,143,157,139,139,145,146,142,133,131,116,126,115,114,117,112,117,113,98,106,97,100,98,95,82,79,78,82,68,62,53,56,51,50,45,46,44,46,47,44,39,34,34,35,33,33,28,31,27,26,26,32,23,28,22,20,19,17,19,19,18,20,14,19,18,17,18,19,17,18,16,20,18,11,7,14,8,10,6,9,9,10,7,12,7,8,12,8,8,5,3,2,2,2,2,1,1,1,1,1,1,1,2,1,1,4}','img');





---ki
{0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
{0, 29, 98, 919, 2792, 1152, 234, 529, 773, 1873, 5204, 3831, 888, 342, 602, 909, 1061, 943, 931, 830, 595, 347, 211, 128, 116, 96, 86, 82, 84, 86, 84, 90, 82, 79, 84, 81, 69, 81, 71, 70, 75, 61, 72, 61, 66, 63, 57, 61, 51, 52, 64, 54, 57, 50, 46, 51, 52, 51, 45, 49, 44, 52, 49, 50, 51, 41, 36, 44, 40, 39, 37, 42, 44, 44, 34, 34, 28, 32, 30, 30, 31, 24, 25, 28, 29, 29, 23, 25, 27, 26, 25, 25, 23, 24, 27, 25, 22, 20, 20, 19, 22, 21, 18, 22, 20, 18, 19, 17, 17, 18, 14, 17, 17, 14, 16, 15, 12, 15, 14, 14, 16, 13, 13, 16, 14, 12, 12, 12, 10, 11, 12, 10, 12, 9, 10, 9, 10, 8, 11, 8, 6, 9, 10, 9, 5, 6, 7, 9, 6, 9, 10, 6, 5, 5, 8, 7, 4, 6, 8, 4, 7, 4, 5, 7, 6, 5, 2, 5, 6, 7, 6, 4, 4, 7, 5, 6, 5, 7, 3, 6, 2, 5, 5, 3, 3, 3, 2, 4, 4, 2, 4, 3, 3, 3, 2, 5, 5, 3, 3, 5, 2, 2, 1, 1, 4, 2, 2, 1, 1, 0, 1, 1, 2, 3, 1, 1, 3, 0, 1, 1, 1, 1, 1, 0, 1, 2, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0};
{60,65,193,218,194,192,194,170,127,109,91,97,87,86,83,93,88,78,77,77,81,86,84,82,97,101,83,89,78,82,98,97,84,81,76,60,70,80,101,85,81,84,129,143,159,154,166,193,147,187,187,169,138,179,154,156,174,175,137,151,128,113,109,93,107,104,96,87,93,97,88,82,68,61,61,72,72,62,62,58,67,58,56,61,65,75,72,72,76,78,93,97,109,114,105,89,77,88,91,92,102,98,99,111,110,117,118,129,138,131,127,140,129,129,126,129,143,135,136,142,155,155,154,177,161,166,164,163,190,184,169,168,172,157,167,159,161,149,140,140,133,138,139,145,129,135,140,137,132,137,135,129,126,132,113,117,111,94,85,98,80,82,80,79,71,69,71,64,63,64,54,56,50,59,64,63,63,57,61,57,58,71,77,71,66,71,65,60,59,66,67,59,55,60,69,66,62,71,58,68,67,60,76,65,83,87,84,91,95,103,106,95,99,86,78,79,90,109,82,90,83,76,72,68,68,48,58,56,53,49,48,52,43,33,44,36,33,33,28,22,25,24,18,15,23,23,21,18,22,25,38,55,82,145,225,96};

-------------------para insert----
-------------------------------------------------------------
--create table images( -
--	id int PRIMARY KEY, -
--	vc int[3], 
--	img text
--);

create table images(
	id  int PRIMARY KEY, 
	vector int[256], 
	img bytea
);




CREATE OR REPLACE FUNCTION insert_image( int [256] , int ) 
RETURNS void
AS '/home/micaela/project/lib/insert_image.so', 'insert_image'
LANGUAGE C STRICT;

CREATE OR REPLACE FUNCTION rellenar_datos() RETURNS TRIGGER AS $rellenar_datos$
  DECLARE
  BEGIN 
   PERFORM insert_image (NEW.vector, New.id);
   RETURN NEW;
  END;
$rellenar_datos$ LANGUAGE plpgsql;


CREATE TRIGGER rellenar_datos BEFORE INSERT
ON images FOR EACH ROW EXECUTE PROCEDURE rellenar_datos();



---utilidades
--listar triggers
select * from pg_trigger;

DROP TRIGGER rellenar_datos ON images;
drop function insert_image(int[] ,int);
drop function rellenar_datos();

-------------------------------------------------------------

-----busquedas
select ss_img('{0,1,1,4,5,5,10,11,22,29,44,51,56,69,87,88,110,115,126,134,133,128,150,142,145,145,146,136,140,140,159,153,170,153,159,179,162,162,165,171,188,181,188,193,205,183,185,195,177,191,181,159,163,159,176,170,162,160,167,144,165,170,166,171,180,174,178,189,185,188,200,181,209,194,213,201,183,184,189,198,184,183,181,189,181,187,193,206,199,199,208,229,241,224,239,235,234,221,223,231,228,225,233,226,231,231,216,225,222,223,218,220,254,213,218,200,199,200,199,203,211,195,194,211,186,195,214,203,181,179,199,182,173,179,168,183,176,169,165,161,162,161,164,154,156,154,149,152,137,150,148,143,157,139,139,145,146,142,133,131,116,126,115,114,117,112,117,113,98,106,97,100,98,95,82,79,78,82,68,62,53,56,51,50,45,46,44,46,47,44,39,34,34,35,33,33,28,31,27,26,26,32,23,28,22,20,19,17,19,19,18,20,14,19,18,17,18,19,17,18,16,20,18,11,7,14,8,10,6,9,9,10,7,12,7,8,12,8,8,5,3,2,2,2,2,1,1,1,1,1,1,1,2,1,1,4}',7500,10);
select ss_img('{264,275,382,416,448,407,421,396,406,398,377,384,357,373,351,352,339,320,318,324,318,301,296,291,273,270,258,239,233,237,228,208,208,203,203,202,170,183,168,167,160,161,156,164,161,154,150,148,144,132,138,125,128,132,127,117,114,118,115,121,119,107,112,110,114,103,109,110,101,117,109,110,107,101,96,100,97,90,101,100,97,92,96,97,97,94,85,87,94,91,86,106,92,94,87,84,82,93,86,90,87,83,83,87,77,85,80,73,82,73,76,81,73,72,71,73,76,62,60,63,68,66,63,61,61,58,59,55,62,56,62,65,52,64,57,54,52,55,58,51,61,51,53,54,53,49,47,47,48,42,44,42,48,45,46,47,45,43,43,37,41,37,48,39,39,35,41,45,35,41,39,35,35,32,38,31,29,34,30,31,26,25,29,31,19,27,29,32,34,27,30,26,32,25,30,25,26,27,26,22,21,20,28,25,23,24,24,21,26,24,23,25,21,29,20,16,20,23,21,19,22,23,25,18,22,25,24,21,24,24,26,24,27,26,29,28,18,19,24,22,20,23,25,19,24,24,23,18,23,21,16,14,16,20,12,93}',8000,10);



